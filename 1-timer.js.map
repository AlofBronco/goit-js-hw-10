{"version":3,"file":"1-timer.js","sources":["../src/js/1-timer.js"],"sourcesContent":["import flatpickr from 'flatpickr';\nimport 'flatpickr/dist/flatpickr.min.css';\nimport iziToast from 'izitoast';\nimport 'izitoast/dist/css/iziToast.min.css';\n\nconst buttonStart = document.querySelector('.js-button');\nconst inputDate = document.querySelector('.js-datetime-picker');\n\nconst daysDisplay = document.querySelector('[data-days]');\nconst hoursDisplay = document.querySelector('[data-hours]');\nconst minutesDisplay = document.querySelector('[data-minutes]');\nconst secondsDisplay = document.querySelector('[data-seconds]');\n\nlet userSelectedDate;\n\nflatpickr('#datetime-picker', {\n  enableTime: true,\n  time_24hr: true,\n  defaultDate: new Date(),\n  minuteIncrement: 1,\n  onClose(selectedDates) {\n    userSelectedDate = selectedDates[0];\n\n    if (userSelectedDate <= new Date()) {\n      buttonStart.setAttribute('disabled', '');\n      iziToast.show({\n        title: 'Error',\n        message: 'Please choose a date in the future',\n        messageColor: 'white',\n        titleColor: 'white',\n        backgroundColor: '#ef4040',\n        position: 'topRight',\n      });\n    } else {\n      buttonStart.removeAttribute('disabled');\n    }\n  },\n});\n\nlet countdown;\n\nbuttonStart.addEventListener('click', e => {\n  buttonStart.setAttribute('disabled', '');\n  inputDate.setAttribute('disabled', '');\n\n  startCountdown();\n});\n\nfunction startCountdown() {\n  if (!userSelectedDate) return;\n\n  clearInterval(countdown);\n  const targetTime = userSelectedDate.getTime();\n  let remainingUnixTime = targetTime - Date.now();\n  let remainingTime = addLeadingZero(convertMs(remainingUnixTime));\n\n  changeText(remainingTime);\n\n  countdown = setInterval(() => {\n    remainingUnixTime = targetTime - Date.now();\n\n    if (remainingUnixTime <= 0) {\n      clearInterval(countdown);\n\n      inputDate.removeAttribute('disabled');\n\n      changeText({ days: '00', hours: '00', minutes: '00', seconds: '00' });\n\n      return;\n    }\n\n    remainingTime = addLeadingZero(convertMs(remainingUnixTime));\n    changeText(remainingTime);\n  }, 1000);\n}\n\nfunction changeText(remainingTime) {\n  secondsDisplay.textContent = remainingTime.seconds;\n  minutesDisplay.textContent = remainingTime.minutes;\n  hoursDisplay.textContent = remainingTime.hours;\n  daysDisplay.textContent = remainingTime.days;\n}\n\nfunction convertMs(ms) {\n  // Number of milliseconds per unit of time\n  const second = 1000;\n  const minute = second * 60;\n  const hour = minute * 60;\n  const day = hour * 24;\n\n  // Remaining days\n  const days = Math.floor(ms / day);\n  // Remaining hours\n  const hours = Math.floor((ms % day) / hour);\n  // Remaining minutes\n  const minutes = Math.floor(((ms % day) % hour) / minute);\n  // Remaining seconds\n  const seconds = Math.floor((((ms % day) % hour) % minute) / second);\n\n  return { days, hours, minutes, seconds };\n}\n\nfunction addLeadingZero({ days, hours, minutes, seconds }) {\n  days = days.toString().padStart(2, 0);\n  hours = hours.toString().padStart(2, 0);\n  minutes = minutes.toString().padStart(2, 0);\n  seconds = seconds.toString().padStart(2, 0);\n\n  return { days, hours, minutes, seconds };\n}\n"],"names":["buttonStart","inputDate","daysDisplay","hoursDisplay","minutesDisplay","secondsDisplay","userSelectedDate","flatpickr","selectedDates","iziToast","countdown","e","startCountdown","targetTime","remainingUnixTime","remainingTime","addLeadingZero","convertMs","changeText","ms","days","hours","minutes","seconds"],"mappings":"0IAKA,MAAMA,EAAc,SAAS,cAAc,YAAY,EACjDC,EAAY,SAAS,cAAc,qBAAqB,EAExDC,EAAc,SAAS,cAAc,aAAa,EAClDC,EAAe,SAAS,cAAc,cAAc,EACpDC,EAAiB,SAAS,cAAc,gBAAgB,EACxDC,EAAiB,SAAS,cAAc,gBAAgB,EAE9D,IAAIC,EAEJC,EAAU,mBAAoB,CAC5B,WAAY,GACZ,UAAW,GACX,YAAa,IAAI,KACjB,gBAAiB,EACjB,QAAQC,EAAe,CACrBF,EAAmBE,EAAc,CAAC,EAE9BF,GAAoB,IAAI,MAC1BN,EAAY,aAAa,WAAY,EAAE,EACvCS,EAAS,KAAK,CACZ,MAAO,QACP,QAAS,qCACT,aAAc,QACd,WAAY,QACZ,gBAAiB,UACjB,SAAU,UAClB,CAAO,GAEDT,EAAY,gBAAgB,UAAU,CAEzC,CACH,CAAC,EAED,IAAIU,EAEJV,EAAY,iBAAiB,QAASW,GAAK,CACzCX,EAAY,aAAa,WAAY,EAAE,EACvCC,EAAU,aAAa,WAAY,EAAE,EAErCW,GACF,CAAC,EAED,SAASA,GAAiB,CACxB,GAAI,CAACN,EAAkB,OAEvB,cAAcI,CAAS,EACvB,MAAMG,EAAaP,EAAiB,UACpC,IAAIQ,EAAoBD,EAAa,KAAK,IAAG,EACzCE,EAAgBC,EAAeC,EAAUH,CAAiB,CAAC,EAE/DI,EAAWH,CAAa,EAExBL,EAAY,YAAY,IAAM,CAG5B,GAFAI,EAAoBD,EAAa,KAAK,MAElCC,GAAqB,EAAG,CAC1B,cAAcJ,CAAS,EAEvBT,EAAU,gBAAgB,UAAU,EAEpCiB,EAAW,CAAE,KAAM,KAAM,MAAO,KAAM,QAAS,KAAM,QAAS,IAAI,CAAE,EAEpE,MACD,CAEDH,EAAgBC,EAAeC,EAAUH,CAAiB,CAAC,EAC3DI,EAAWH,CAAa,CACzB,EAAE,GAAI,CACT,CAEA,SAASG,EAAWH,EAAe,CACjCV,EAAe,YAAcU,EAAc,QAC3CX,EAAe,YAAcW,EAAc,QAC3CZ,EAAa,YAAcY,EAAc,MACzCb,EAAY,YAAca,EAAc,IAC1C,CAEA,SAASE,EAAUE,EAAI,CAQrB,MAAMC,EAAO,KAAK,MAAMD,EAAK,KAAG,EAE1BE,EAAQ,KAAK,MAAOF,EAAK,MAAO,IAAI,EAEpCG,EAAU,KAAK,MAAQH,EAAK,MAAO,KAAQ,GAAM,EAEjDI,EAAU,KAAK,MAASJ,EAAK,MAAO,KAAQ,IAAU,GAAM,EAElE,MAAO,CAAE,KAAAC,EAAM,MAAAC,EAAO,QAAAC,EAAS,QAAAC,CAAO,CACxC,CAEA,SAASP,EAAe,CAAE,KAAAI,EAAM,MAAAC,EAAO,QAAAC,EAAS,QAAAC,CAAO,EAAI,CACzD,OAAAH,EAAOA,EAAK,SAAQ,EAAG,SAAS,EAAG,CAAC,EACpCC,EAAQA,EAAM,SAAQ,EAAG,SAAS,EAAG,CAAC,EACtCC,EAAUA,EAAQ,SAAQ,EAAG,SAAS,EAAG,CAAC,EAC1CC,EAAUA,EAAQ,SAAQ,EAAG,SAAS,EAAG,CAAC,EAEnC,CAAE,KAAAH,EAAM,MAAAC,EAAO,QAAAC,EAAS,QAAAC,CAAO,CACxC"}